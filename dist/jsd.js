!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rxjs/Rx")):"function"==typeof define&&define.amd?define(["rxjs/Rx"],e):"object"==typeof exports?exports.JSD=e(require("rxjs/Rx")):t.JSD=e(t.Rx)}(window,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=15)}([function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e._vPaths=e._vBuilders=e._oBuilders=e._validPaths=e._observers=e._schemaSignatures=e._schemaHelpers=e._schemaOptions=e._vectorTypes=e._singletons=e._validators=e._required_elements=e._mdRef=e._object=e._kinds=e.wf=e._exists=void 0;var n=r(14);e._exists=n.exists,e.wf={Fun:n.Fun,Obj:n.Obj,Str:n.Str},e._kinds=new WeakMap,e._object=new WeakMap,e._mdRef=new WeakMap,e._required_elements=new WeakMap,e._validators=new WeakMap,e._singletons=new WeakMap,e._vectorTypes=new WeakMap,e._schemaOptions=new WeakMap,e._schemaHelpers=new WeakMap,e._schemaSignatures=new WeakMap,e._observers=new WeakMap,e._validPaths=new WeakMap,e._oBuilders=new WeakMap,e._vBuilders=new WeakMap,e._vPaths=new WeakMap},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.JSD=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),a=r(12),s=r(10),u=r(8),f=r(5),l=r(4);var c=new WeakMap;e.JSD=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaults,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Schema.defaultOption;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o._kinds.set(this,{Array:Array,ArrayBuffer:ArrayBuffer,Boolean:Boolean,Buffer:ArrayBuffer,Date:Date,Number:Number,Object:Object,String:String,Function:Function});var n=new s.ValidatorBuilder(this);o._vBuilders.set(this,n),o._validPaths.set(this,{}),o._oBuilders.set(this,new a.ObserverBuilder);var i=!1;(Array.isArray(e)||e.hasOwnProperty("type")&&"Array"===e.type)&&(i=!0,e={"*":{polymorphic:Array.isArray(e)?e:[e]}});var h;if("string"==typeof(h=new l.SchemaValidator(e,Object.assign({},this.options,{jsd:this})).isValid))throw h;c.set(this,new(i?f.Set:u.Schema)(e,r,this))}return i(t,[{key:"get",value:function(t){return c.get(this).get(t)}},{key:"getClass",value:function(t){var e=o._kinds.get(this);Array.isArray(t)||(t=[t]);var r=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var f=s.value;if("string"==typeof f)return"*"===f?"*":0<=Object.keys(e).indexOf(f)?f.toLowerCase():null;if("object"===(void 0===f?"undefined":n(f))){if(Array.isArray(f)){var l=[],c=!0,h=!1,p=void 0;try{for(var y,d=f[Symbol.iterator]();!(c=(y=d.next()).done);c=!0){var v=y.value;switch(void 0===v?"undefined":n(v)){case"string":l.push(this.getClass(v));break;case"function":l.push(v);break;default:l.push(Array.isArray(v)?this.getClass.apply(this,v):null)}}}catch(t){h=!0,p=t}finally{try{!c&&d.return&&d.return()}finally{if(h)throw p}}return 0<=l.indexOf(null)?{_r:null}:void 0}return null}if("function"==typeof f){var g=o.wf.Fun.getConstructorName(f);return this.getClass(g)}}}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return null}},{key:"registerClass",value:function(t,e){return this[t]=e,o._kinds.get(this)[t]=e}},{key:"unregisterClass",value:function(t){return!!o._kinds.hasOwnProperty(t)&&delete o._kinds.get(this)[t]}},{key:"listClasses",value:function(){return Object.keys(o._kinds.get(this))}},{key:"document",get:function(){return c.get(this)}},{key:"isValid",get:function(){return this.document.isValid}},{key:"schemaRef",get:function(){return{type:{type:[].concat(Object.keys(o._kinds.get(this))),required:!0},required:"Boolean",extensible:"Boolean",restrict:"String",default:"*",elements:["Object","Array"],polymorphic:{type:["Object","Array"],required:!1,elements:{type:{type:this.listClasses(),required:!0},extensible:"Boolean",restrict:"String",validate:"Function",default:"*",elements:["Object","Array"]}}}}}],[{key:"fromJSON",value:function(e){var r;if(r=(void 0===e?"undefined":n(e)).match(/^(string|object)+$/))return new t("string"===r[1]?JSON.parse(e):e);throw new Error("json must be either JSON formatted string or object")}},{key:"defaults",get:function(){return{type:"Object",required:!1,extensible:!0,writeLock:!1,elements:{"*":{type:"*",required:!1,extensible:!0}}}}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ensureRequiredFields=e.ensureKindIsString=e.remapPolypath=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(0);e.remapPolypath=function t(e){var r=/(.*)\d\.polymorphic+(.*)/;return function(e){var n=!1;return e=e.replace(r,function(t,e,r){return t&&(n=!0),e+"*.polymorphic"+r}),n&&(e=t(e)),e}(e)},e.ensureKindIsString=function(t){switch(void 0===t?"undefined":n(t)){case"string":return""+t;case"object":if(t.hasOwnProperty("type"))return(void 0).ensureKindIsString(t.type)}return!1},e.ensureRequiredFields=function(t,e){var r=Object.keys(e||{}),n=t.requiredFields;try{n.forEach(function(o){var a=n[o],s=t.path.length?t.path:"root element";if(0>r.indexOf(a)){if(!(0,i._exists)(t.signature[a].default))throw'required property "'+a+"\" is missing for '"+s+"'";e[a]=t.signature[a].default}})}catch(t){return t}return e}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(0),a=r(1),s=r(2),u=r(6);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(t,e,r){var n=void 0;if(r instanceof a.JSD)n=new u.MetaData(t,{_path:"",_root:t,_writeLock:e,_jsd:r});else{if("object"!==(void 0===r?"undefined":i(r)))throw"Invalid attempt to construct Model.tip: use `new JSD([schema])` instead";n=r instanceof u.MetaData?r:new u.MetaData(void 0,r)}o._mdRef.set(t,n)};e.Model=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(this,t),this instanceof u.MetaData||l(this,e,arguments[1])}return n(t,[{key:"subscribe",value:function(t){return this.subscribeTo(this.path,t)}},{key:"subscribeTo",value:function(t,e){if(null===(void 0===e?"undefined":i(e)).match(/^(function|object)$/))throw new Error("subscribeTo requires function");var r=function t(){f(this,t)},n=[],o=this.observerBuilder.get(t);return o&&null!==o||(this.observerBuilder.create(t,this),o=this.observerBuilder.get(t)),e.hasOwnProperty("next")&&n.push(o.onNext.subscribe({next:e.next})),e.hasOwnProperty("error")&&n.push(o.onError.subscribe({next:e.error})),e.hasOwnProperty("complete")&&n.push(o.onComplete.subscribe({next:e.complete})),r.prototype.unsubscribe=function(){n.forEach(function(t){t.unsubscribe()})},new r}},{key:"validate",value:function(){var t=o._validPaths.get(this.jsd);try{Object.keys(t).forEach(function(e){if("string"===i(t[e]))throw t[e]})}catch(t){return t}return!0}},{key:"valueOf",value:function(){return o._object.get(this)}},{key:"toJSON",value:function(){var t=this;return function e(r){if(r.hasOwnProperty("toJSON")&&"function"==typeof t.toJSON)return r.toJSON();if("object"===(void 0===r?"undefined":i(r))){var n=Array.isArray(r)?[]:{};for(var o in r)r.hasOwnProperty(o)&&(n[o]=e(r[o]));return n}return r}(this.valueOf())}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return JSON.stringify(this.toJSON(),null,t?2:void 0)}},{key:"lock",value:function(){Object.freeze(o._object.get(this));var t=this;return setTimeout(function(){t.observerBuilder.complete(t.path,t)},0),this}},{key:"handler",get:function(){throw"Model requires sub-classed implmentation of handler getter"}},{key:"isValid",get:function(){return"string"!=typeof this.validate()}},{key:"objectID",get:function(){return o._mdRef.get(this)._id}},{key:"root",get:function(){return o._mdRef.get(this).root||this}},{key:"path",get:function(){var t=o._mdRef.get(this).path;return(0,o._exists)(t)?t:""}},{key:"parent",get:function(){var t=o._mdRef.get(this).root;return(0,o._exists)(t)?t:this}},{key:"jsd",get:function(){return o._mdRef.get(this).jsd}},{key:"options",get:function(){return o._schemaOptions.get(this)}},{key:"validatorBuilder",get:function(){return o._vBuilders.get(this.jsd)}},{key:"observerBuilder",get:function(){return o._oBuilders.get(this.jsd)}},{key:"isLocked",get:function(){return Object.isFrozen(o._object.get(this))}},{key:"validationPath",get:function(){var t=(0,s.remapPolypath)(this.path);return this.schema.hasOwnProperty("polymorphic")&&(t=t.replace(/(\.\d\.(?!polymorphic))+/,".*.polymorphic.")),t}},{key:"schema",get:function(){return JSON.parse(o._schemaSignatures.get(this))}},{key:"signature",get:function(){return this.schema}}],[{key:"createRef",value:function(t,e){return Object.defineProperty(e,"$ref",{value:t,writable:!1}),e}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SchemaValidator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0);e.SchemaValidator=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{extensible:!1};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=void 0;if(o._schemaOptions.set(this,r),Object.defineProperty(this,"isValid",{get:function(){return i||!0},enumerable:!1}),"object"!==(void 0===e?"undefined":n(e)))try{e=JSON.parse(e.toString())}catch(t){throw"Schema was invalid. JSON object or formatted string is required"}i=t.eval(e,this)}return i(t,[{key:"validateTypeString",value:function(t,e){if(t.match(/\.?default+$/))return!0;if(t.match(/\.?restrict+$/)){if("string"!=typeof e||!e.length)return"restrict requires a Regular Expression String";try{"text".match(new RegExp(e))}catch(e){return"Regular Expression provided for '"+t+"' was invalid. "+e}}else if(!(0,o._exists)(this.jsd.getClass(o.wf.Str.capitalize(e))))return"type '<"+e+">' for schema element '"+t+"' was invalid";return!0}},{key:"validateUntypedMembers",value:function(t,e){if(Array.isArray(e)){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s,u=o.value;if("string"==typeof(s=this.validateSchemaEntry(""+t,u)))return s}}catch(t){n=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}else{var f,l;if("elements"!==(f=(l=t.split(".")).pop()))return"default"===f||(Array.isArray(e)&&(e={polymorphic:e}),e.hasOwnProperty("polymorphic")?this.validatePolymorphicEntry(t+".polymorphic",e.polymorphic):"value for schema element '"+t+"' was malformed. Property 'type' was missing");var c=!0,h=!1,p=void 0;try{for(var y,d=Object.keys(e)[Symbol.iterator]();!(c=(y=d.next()).done);c=!0){var v,g=y.value,b=[].concat(l).concat(g);if("string"==typeof(v=this.validateSchemaEntry(""+b.join("."),e[g])))return v}}catch(t){h=!0,p=t}finally{try{!c&&d.return&&d.return()}finally{if(h)throw p}}}return!0}},{key:"validateSchemaClass",value:function(t,e){if(!(0,o._exists)(t))throw"key was undefined";if("string"!=typeof t)throw"string expected for argument 'key'. Type was '<"+(void 0===t?"undefined":n(t))+">'";if(!(0,o._exists)(e))throw"params was undefined";if("object"!==(void 0===e?"undefined":n(e)))throw"object expected for argument 'params'. Type was '<"+(void 0===e?"undefined":n(e))+">'";return"*"===e.type||(0===Object.keys(e).length||("object"===n(e.type)?this.validateSchemaEntry(t,e.type):"default"===t.split(".").pop()?(null==this._defaults&&(this._defaults={}),this._defaults[t]=e,!0):"value for schema element '"+t+"' has invalid type '<"+e.type+">'"))}},{key:"validateSchemaParamString",value:function(t,e,r){var n=this.jsd.schemaRef,i=o._schemaOptions.get(this);if("restrict"===e){try{new RegExp(r[e])}catch(t){return t}return!0}if("*"!==e&&!(0,o._exists)(n[e])&&!1===i.extensible)return"schema element '"+t+"."+e+"' is not allowed";var a=this.validateTypeString(t+"."+e,r[e]);return"string"==typeof a?a:(o._vBuilders.get(this.jsd).create(r,t),!0)}},{key:"validateSchemaParam",value:function(t,e,r,i){var a=void 0,s=void 0;if("*"!==e&&!(0,o._exists)(r[e])&&!o._schemaOptions.get(this).extensible)return"schema element '"+t+"."+e+"' is not allowed";if("string"==typeof i[e]){var u=this.validateSchemaParamString(t,e,i);if("string"==typeof u)return u}if("polymorphic"===e)return this.validatePolymorphicEntry(t,i);if("object"===n(r[e])){if("elements"===e){var f=Array.isArray(i.elements)?i.elements:Object.keys(i.elements),l=!0,c=!1,h=void 0;try{for(var p,y=f[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var d=p.value;if("string"==typeof d){if("string"==typeof(s=this.validateSchemaEntry(t+"."+d,i.elements[d])))return s}else if("string"==typeof(s=this.validateSchemaParam(t,d.type,r,i.elements)))return s}}catch(t){c=!0,h=t}finally{try{!l&&y.return&&y.return()}finally{if(c)throw h}}return!0}if(a=r[e].type,!(0,o._exists)(a))return"type attribute was not defined for "+t;if(Array.isArray(a)||(a=a.type),"*"===i.type)return!0;if(a.indexOf(i.type)<0)return"type attribute was not defined for "+e}return o._vBuilders.get(this.jsd).create(i,t),!0}},{key:"validateSchemaEntry",value:function(t,e,r){var i=this.jsd.schemaRef;if((0,o._exists)(r)||(r=o._schemaOptions.get(this)),"polymorphic"===t)return this.validatePolymorphicEntry(""+t,e,r);if(!(0,o._exists)(e))return t+" was null or undefined";if("boolean"==typeof e)return!0;if("string"==typeof e)return this.validateTypeString(""+t,e);if("object"===(void 0===e?"undefined":n(e))){if(!e.hasOwnProperty("type"))return this.validateUntypedMembers(t,e);if(null===this.jsd.getClass(e.type))return this.validateSchemaClass(t,e);if("Array"===e.type&&(e.hasOwnProperty("elements")&&(e.polymorphic=Array.isArray(e.elements)?[].concat(e.elements):[Object.assign({},e.elements)],delete e.elements),o._vBuilders.get(this.jsd).create(e,t),t+=".*.polymorphic",e.hasOwnProperty("polymorphic")))return Array.isArray(e.polymorphic)||(e.polymorphic=[e.elements]),this.validatePolymorphicEntry(t,e.polymorphic);var a=!0,s=!1,u=void 0;try{for(var f,l=Object.keys(e)[Symbol.iterator]();!(a=(f=l.next()).done);a=!0){var c=f.value,h=this.validateSchemaParam(t,c,i,e);if("string"==typeof h)return h}}catch(t){s=!0,u=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return!0}var p=void 0===e?"undefined":n(e);if("function"!==p){if(i[t.split(".").pop()]!==o.wf.Str.capitalize(p))return"value for schema element '"+t+"' has invalid type :: \"<"+p+'>"'}else{var y=o.wf.Fun.getConstructorName(e);if(y!==i[t])return"value for schema element '"+t+"' has invalid class or method \"<"+y+'>"'}return!0}},{key:"validatePolymorphicEntry",value:function(t,e,r){var n=this,i=0;try{e.forEach(function(e){var a=t+"."+i,s=n.validateSchemaEntry(a,e,r);if("string"==typeof s)throw s;o._vBuilders.get(n.jsd).create(e,a),i++})}catch(t){return t}return!0}},{key:"jsd",get:function(){return o._schemaOptions.get(this).jsd}}],[{key:"eval",value:function(e,r){var i=!0,o=Array.isArray(e)?e:Object.keys(e),a=!0,s=!1,u=void 0;try{for(var f,l=o[Symbol.iterator]();!(a=(f=l.next()).done);a=!0){var c=f.value;if(c&&"object"===(void 0===c?"undefined":n(c))){var h=t.eval(c,r);if("string"==typeof h){i=h;break}break}switch(n(e[c])){case"string":i=r.validateSchemaEntry(c,e[c]);break;case"object":if(Array.isArray(e[c])){if("polymorphic"===c)return r.validatePolymorphicEntry(c,e[c]);var p=!0,y=!1,d=void 0;try{for(var v,g=e[c][Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value;if("string"==typeof(i="string"==typeof e[c][b]?r.validateTypeString(c,b):r.validateSchemaEntry(c,b)))return i}}catch(t){y=!0,d=t}finally{try{!p&&g.return&&g.return()}finally{if(y)throw d}}}else if("elements"!==c)i=r.validateSchemaEntry(c,e[c]);else{var m=!0,w=!1,_=void 0;try{for(var O,S=Object.keys(e[c])[Symbol.iterator]();!(m=(O=S.next()).done);m=!0){var j=O.value;if("string"==typeof(i=r.validateSchemaEntry(j,e[c][j])))break}}catch(t){w=!0,_=t}finally{try{!m&&S.return&&S.return()}finally{if(w)throw _}}}break;case"boolean":i=r.validateSchemaEntry(c,e[c]);break;default:i="value for schema element '"+c+"' was invalid"}if("string"==typeof i)return i}}catch(t){s=!0,u=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return i}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Set=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),a=(r(4),r(1)),s=r(3),u=r(7);var f=new WeakMap;e.Set=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.writeLock||!1,arguments[2]));o._schemaOptions.set(n,r),o._schemaHelpers.set(n,new u.SchemaHelpers(n)),t.hasOwnProperty("type")||(t.type="Array"),o._vPaths.set(n,n.path+".*.polymorphic");var i=t["*"]||a.JSD.defaults;return o._schemaSignatures.set(n,JSON.stringify(i)),o._object.set(n,new Proxy(s.Model.createRef(n,[]),n.handler)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Model),i(e,[{key:"getItemAt",value:function(t){return this.model[t]}},{key:"setItemAt",value:function(t,e){return this.model[t]=e,this}},{key:"removeItemAt",value:function(t){return delete this.model[t],this}},{key:"replaceAll",value:function(t){return this.model=t,this}},{key:"replaceItemAt",value:function(t,e){return!!this.validatorBuilder.exec(this.path,e)&&(!(t>this.model.length)&&(t<=this.model.length&&(this.model[t]=e),this))}},{key:"addItem",value:function(t){return this.setItemAt(this.model.length,t),this}},{key:"shift",value:function(){return Reflect.apply(Array.prototype.shift,this.model,[])}},{key:"unshift",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return Reflect.apply(Array.prototype.unshift,this.model,arguments),this}},{key:"pop",value:function(){var t=this.model[this.model.length-1];return delete this.model[this.model.length-1],t}},{key:"push",value:function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(e){return t.addItem(e)}),this.observerBuilder.next(this.path,this),this}},{key:"reset",value:function(){return o._object.set(this,new Proxy(s.Model.createRef(this,[]),this.handler)),this}},{key:"sort",value:function(t){return this.model.sort(t),this}},{key:"model",get:function(){return o._object.get(this)},set:function(t){var e=this;if(Array.isArray(t)){this.isLocked||o._object.set(this,new Proxy(s.Model.createRef(this,[]),this.handler));try{var r=0;f.set(this,{next:function(){e.length===t.length&&e.observerBuilder.next(e.path,e)},error:function(){}}),t.forEach(function(t){o._object.get(e)[r++]=t})}catch(t){return this.observerBuilder.error(this.path,t)}return"boolean"==typeof this.isValid?(this.observerBuilder.next(this.path,this),!0):(this.observerBuilder.error(this.path,this.validate()),!1)}this.observerBuilder.error(this.path,this.path+" requires Array")}},{key:"handler",get:function(){var t=this;return{get:function(e,r){return"length"===r?e.length:r in Array.prototype?e[r]:"$ref"===r?t:e[r]},set:function(e,r,i){if(r in Array.prototype)return!0;var a=f.get(t),s=function(e){o._validPaths.get(t.jsd)[t.path]=e,a?a.error(e):t.observerBuilder.error(t.path,e)},u=(""+o._vPaths.get(t)).replace(/^\.?(.*)$/,"$1"),l=0,c='unable to validate "'+t.path+'"';if((t.schema.polymorphic||t.schema).some(function(){return!0===(c=t.validatorBuilder.exec(u+"."+l++,i))}),"string"==typeof c)return s(c),!1;if("object"===(void 0===i?"undefined":n(i))){var h=o._schemaHelpers.get(t);i=h.setChildObject(u+"."+(l-1),i)}return e[r]=i,"boolean"==typeof(c=t.validate())?(o._validPaths.get(t.jsd)[t.path]=!0,a?a.next(t):t.observerBuilder.next(t.path,t),!0):(s(c),!1)},deleteProperty:function(e,r){if(r>=e.length){var n="index "+r+" is out of bounds on "+t.path;return t.observerBuilder.error(t.path,n),!1}return e.splice(r,1),t.observerBuilder.next(t.path,e),!0}}}},{key:"length",get:function(){return this.model.length||0}}]),e}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MetaData=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);var o=new WeakMap;e.MetaData=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=i.wf.Fun.getConstructorName(e);if(null==this._createID){var a=0;t.prototype._createID=function(){return null==this.__objID&&(a+=1,this.__objID=""+n+a),this.__objID}}r.hasOwnProperty("_writeLock")&&void 0!==r._writeLock||(r._writeLock=!1),r=Object.assign({},r,{_id:this._createID(),_className:n,_created:Date.now()}),o.set(this,r),i._mdRef.set(this,this)}return n(t,[{key:"get",value:function(t){var e=o.get(this);return e.hasOwnProperty(t)?e[t]:null}},{key:"set",value:function(){return this}},{key:"toString",value:function(){return JSON.stringify(o.get(this))}},{key:"objectID",get:function(){return this.get("_id")}},{key:"root",get:function(){return this.get("_root")}},{key:"path",get:function(){return this.get("_path")}},{key:"jsd",get:function(){return this.get("_jsd")}},{key:"parent",get:function(){var t=(this.path||"").split(".");return(t=t.length>1?t.slice(0,t.length-2).join("."):t[0]).length?this.root.get(t):this.root}},{key:"writeLock",get:function(){return this.get("_writeLock")}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SchemaHelpers=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),a=r(2),s=r(6),u=r(8),f=r(5),l=r(1);e.SchemaHelpers=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(0,o._exists)(e)||"object"!==(void 0===e?"undefined":n(e)))throw new Error("arguments[0] must be an object");this._ref=e,Object.seal(this)}return i(t,[{key:"referenceRequiredElements",value:function(t){if((0,o._exists)(t.elements)){t=t.elements;var e=!0,r=!1,n=void 0;try{for(var i,a=Object.keys(t)[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;t[s].hasOwnProperty("required")&&!0===t[s].required&&o._required_elements.get(this._ref).splice(-1,0,s)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}o._required_elements.set(this._ref,Object.freeze(o._required_elements.get(this._ref)))}}},{key:"setObject",value:function(t){var e=this;return"string"==typeof(t=(0,a.ensureRequiredFields)(this._ref,t))?t:(Object.keys(t).forEach(function(r){var n=e._ref.set(r,t[r]);if("string"==typeof n)throw new Error(n)}),this._ref)}},{key:"setChildObject",value:function(t,e){var r=o._mdRef.get(this._ref),i=this.createSchemaChild(t,e,this._ref.options||{},r);return"string"==typeof i?i:(0,o._exists)(i)&&"object"===(void 0===i?"undefined":n(i))?(i.model=e,i.model):"'"+t+"' was invalid"}},{key:"getSchemaElement",value:function(t){var e=this._ref.schema;return"polymorphic"===t?e.polymorphic[0]:e.hasOwnProperty(t)?e[t]:e.hasOwnProperty("elements")?e.elements[t]||e.elements:e.hasOwnProperty("polymorphic")?{type:"Array",polymorphic:e.polymorphic}:!!(this._ref.options||u.Schema.defaultOptions).extensible&&l.JSD.defaults}},{key:"createSchemaChild",value:function(t,e,r,n){var i=void 0,o=Object.assign({_path:t,_root:this._ref.root,_jsd:this._ref.jsd},n||{}),a=new s.MetaData(this._ref,o);null!==t.match(/\.?polymorphic\.\d$/)?t="polymorphic":null!==t.match(/.*\.+.*/)&&(t=t.split(".").pop());var l=this.getSchemaElement(t);if("Array"===l.type||Array.isArray(l)||Array.isArray(e))try{var c=this._ref.signature[t].polymorphic||this._ref.signature[t];i=new f.Set({"*":c},r,a)}catch(t){return t}else{var h=!!l.hasOwnProperty("elements")&&l.elements[t.split(".").pop()]||l["*"]||l;try{i=new u.Schema(h,r,a)}catch(t){return t.message}}return i}},{key:"validate",value:function(t,e){var r=this,n=this._ref.validatorBuilder,i='unable to resolve path for "'+t+'"';return n.resolvePath(this._ref.validationPath,t).some(function(t){return!0===(i=r._ref.validatorBuilder.exec(t,e))}),i}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Schema=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),a=r(2),s=r(7),u=r(1),f=r(3);var l=new WeakMap;e.Schema=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultSignature,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultOptions;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.writeLock||!1,arguments[2]));if(!(0,o._exists)(t))throw"Schema requires JSON object at arguments[0]. Got '"+(void 0===t?"undefined":n(t))+"'";l.set(i,!1),o._schemaOptions.set(i,Object.freeze(r));var a=new s.SchemaHelpers(i);o._required_elements.set(i,[]),o._schemaHelpers.set(i,a),a.referenceRequiredElements(t),o._vPaths.set(i,i.path);var c=Object.freeze(t||u.JSD.defaults);return o._schemaSignatures.set(i,JSON.stringify(c)),o._object.set(i,new Proxy(f.Model.createRef(i,{}),i.handler)),i.setDefaults(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f.Model),i(e,[{key:"get",value:function(t){return this.model[t]}},{key:"set",value:function(t,e){var r=this;if("string"==typeof t){o._validPaths.get(this.jsd)[this.path]=-1,this.model[t]=e;var n=this.validate();if("string"==typeof n)return this.observerBuilder.error(this.path,n),!1}else{var i=(0,a.ensureRequiredFields)(this,t);if(o._validPaths.get(this.jsd)[this.path]=i,"string"==typeof i)return this.observerBuilder.error(this.path,i),!1;Object.keys(t).forEach(function(e){r.model[e]=t[e]})}if(l.get(this)){if(this.isValid)return this.observerBuilder.next(this.path,this),this;var s=this.validate();return this.observerBuilder.error(this.path,s),!1}}},{key:"setDefaults",value:function(){l.set(this,!1);var t=this.schema,e=!0,r=!1,n=void 0;try{for(var i,a=Object.keys(t)[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value,u=t[s].default;(0,o._exists)(u)&&this.set(s,u)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}l.set(this,!0)}},{key:"handler",get:function(){var t=this;return{get:function(e,r){return"$ref"===r?t:e[r]},set:function(r,i,a){var s=o._schemaHelpers.get(t);if("object"===(void 0===i?"undefined":n(i))){var u=s.setObject(i);return"string"==typeof u?(t.observerBuilder.error(t.path,u),!1):(o._validPaths.get(t.jsd)[t.path]=!0,!0)}var f=(t.validationPath+"."+i).replace(/^\.?(.*)$/,"$1"),l=Array.isArray(t.parent.model),c=s.validate(l?i:f,a);if("string"!=typeof c){if(o._validPaths.get(t.jsd)[t.path]=!0,"object"===(void 0===a?"undefined":n(a))&&"string"==typeof(a=s.setChildObject(i,a)))return o._validPaths.get(t.jsd)[t.path]=a,t.observerBuilder.error(t.path,a),!1;r[i]=a}else o._validPaths.get(t.jsd)[t.path]=c;var h=t.validate();if("string"!=typeof h){if(t.path.length){var p=e.concatPathAddr(t.path,i);t.observerBuilder.next(p,a)}return!0}return t.observerBuilder.error(t.path,h),!1}}}},{key:"signature",get:function(){return JSON.parse(o._schemaSignatures.get(this))}},{key:"model",get:function(){return o._object.get(this)},set:function(t){var e=this,r=void 0;if(this.isLocked||(o._object.set(this,new Proxy(f.Model.createRef(this,{}),this.handler)),this.setDefaults()),"object"===(void 0===t?"undefined":n(t))){var i=Object.keys(t);i.length&&i.forEach(function(r){try{e.model[r]=t[r]}catch(t){return o._validPaths.get(e.jsd)[e.path]=t,e.observerBuilder.error(e.path,t),!1}});var s=(0,a.ensureRequiredFields)(this,t);return"string"==typeof s&&(o._validPaths.get(this.jsd)[this.path]=s),"string"!=typeof(r=this.validate())?(o._mdRef.get(this).writeLock&&!this.isLocked&&this.lock(),this.observerBuilder.next(this.path,this),!0):(this.observerBuilder.error(this.path,r),!1)}return r="unable to set scalar value on model at "+(this.path.length?this.path:"."),o._validPaths.get(this.jsd)[this.path]=r,this.observerBuilder.error(this.path,r),!1}},{key:"isExtensible",get:function(){return(0,o._exists)(this.signature.extensible)?this.signature.extensible:this.options.extensible||!1}},{key:"requiredFields",get:function(){return o._required_elements.get(this)}}],[{key:"concatPathAddr",value:function(t,e){return t.length?t+"."+e:e}},{key:"defaultOptions",get:function(){return{extensible:!1,debug:!1}}},{key:"defaultSignature",get:function(){return{type:"*",required:!0,extensible:!1}}}]),e}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.BaseValidator=e.Validator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0);function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=e.Validator={},l=e.BaseValidator=function(){function t(e,r,n){if(u(this,t),!n)throw"JSD is required for '"+e+"'";this.path=e,this._signature=JSON.stringify(r),this.jsd=n,this.validations[e]=-1,Object.seal(this)}return i(t,[{key:"call",value:function(t,e){var r=o._vBuilders.get(this.jsd).get(t);if((0,o._exists)(r)&&"function"==typeof r){var n=r(e);return this.validations[t]="string"!=typeof n||n,n}return"'"+t+"' has no validator defined"}},{key:"checkType",value:function(t,e){var r=this,i=function(t,e){var i="string"!=typeof t?r.jsd.getClass([t]):t;return"*"===i||(null!==i.match(new RegExp("^"+(void 0===e?"undefined":n(e))+"$","i"))||"'"+r.path+"' expected "+t+", type was '<"+(void 0===e?"undefined":n(e))+">'")};if((0,o._exists)(t)){if(Array.isArray(t)){var a="unable to find type for Array values";return t.some(function(t){return"boolean"==typeof(a=i(t,e))}),a}return i(t,e)}return"type '"+t+"' for "+this.path+" was undefined"}},{key:"exec",value:function(t){return o.wf.Fun.getConstructorName(this)+" requires override of 'exec'"}},{key:"signature",get:function(){return JSON.parse(this._signature)}},{key:"validations",get:function(){return o._validPaths.get(this.jsd)}}]),t}();f.Array=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){return!!Array.isArray(t)||"type of array was expected for '"+this.path+"'. type was '<"+(void 0===t?"undefined":n(t))+">'"}}]),e}(),f.Object=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){var e=this,r=function(t,r){var n=e.path+"."+t;if(!o._vBuilders.get(e.jsd).get(n)){var i=e.signature.elements[t]||e.signature.elements["*"];o._vBuilders.get(e.jsd).create(i,n,e.jsd)}var a=e.call(n,r);if("string"==typeof a)return a};if("object"===(void 0===t?"undefined":n(t))){if(Array.isArray(t)){for(var i in t)if(t.hasOwnProperty(i)){var a=this.call(this.path,t[i]);if("string"==typeof a)return a}}else for(var s in t)if(t.hasOwnProperty(s)){var u=r(s,t[s]);if("string"==typeof u)return u}return!0}return"'"+this.path+"' expected value of type 'Object'. Type was '<"+(void 0===t?"undefined":n(t))+">'"}}]),e}(),f.Boolean=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){return this.checkType("boolean",t)}}]),e}(),f.String=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){var e=this.checkType("string",t);if("string"==typeof e)return e;if((0,o._exists)(this.signature.restrict)){var r=void 0,n=void 0;if(Array.isArray(this.signature.restrict)?(r=this.signature.restrict[0],n=this.signature.restrict.length>1?this.signature.restrict[1]:""):(r=this.signature.restrict,n=""),!(0,o._exists)(new RegExp(r.replace(/[\\\\]{2,}/g,"\\"),n).exec(t)))return"value '"+t+"' for "+this.path+" did not match required expression"}return!0}}]),e}(),f.Number=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){var e=this.checkType("number",t);return"string"==typeof e?e:!isNaN(Number(t))||this.path+" was unable to process '"+t+"' as Number"}}]),e}(),f.Function=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){var e="string"==typeof this.signature.type?this.signature.type:o.wf.Fun.getConstructorName(this.signature.type),r=o.wf.Fun.getConstructorName(t);return e===r||this.path+" requires '$_x' got '<"+r+">' instead"}}]),e}(),f.Default=function(t){function e(t,r,n){return u(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))}return s(e,l),i(e,[{key:"exec",value:function(t){var e=this,r=function(t,r){if("*"===t)return!0;var n=f[o.wf.Str.capitalize(t)];return(0,o._exists)(n)?new n(e.path,e.signature,e.jsd).exec(r):"'"+e.path+"' was unable to obtain validator for type '<"+t+">'"},n="string"==typeof this.signature.type?this.jsd.getClass(this.signature.type):this.signature.type,i=this.checkType(n,t);if("string"==typeof i)return i;if(Array.isArray(n)){var a=n.map(function(n){var i=e.jsd.getClass(n);return r(i,t)});return 0<=a.indexOf(!0)||a[a.length-1]}return r(n,t)}}]),e}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ValidatorBuilder=e.rxRx=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),a=r(2),s=r(9),u=r(1);var f=e.rxRx=/\/((?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/;e.ValidatorBuilder=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e&&e instanceof u.JSD))throw"JSD is required at arguments[0]";Object.defineProperty(this,"$jsd",{get:function(){return e},enumerable:!1}),o._validators.set(this,{}),Object.seal(this)}return i(t,[{key:"list",value:function(){var t=o._validators.get(this);return Object.keys(t)}},{key:"get",value:function(t){var e=o._validators.get(this);return e.hasOwnProperty(t)?e[t]:null}},{key:"set",value:function(t,e){return(0,o._exists)(e)&&"function"==typeof e?(o._validators.get(this)[t]=e,this):"ValidatorBuilder set: expects a function at arguments[1]"}},{key:"resolvePath",value:function(t,e){e=(""+e).replace(new RegExp("^"+o.wf.Str.regexEscape(t)+"\\.(.*)"),"$1"),t=o.wf.Str.regexEscape(""+t),e=o.wf.Str.regexEscape(""+e);var r=new RegExp(t+"\\.?("+e+"+|\\*|"+f.toString().replace(/\/(.*)+\//g,"$1")+")"),n=this.list().filter(function(t){return r.test(t)});if(!n.length){var i=o.wf.Str.regexEscape(t.replace(/([^\.]+\.?)/g,"*.").replace(/^(.*)\.+$/,"$1"));r=new RegExp(i+"\\.?("+e+"+|\\*|"+f.toString().replace(/\/(.*)+\//g,"$1")+")"),n=this.list().filter(function(t){return r.test(t)})}if(!n.length){var a=new RegExp(t+"\\.polymorphic\\.\\d?\\.?("+e+"+|\\*?|"+f.toString().replace(/\/(.*)+\//g,"$1")+")");n=this.list().filter(function(t){return a.test(t)})}var s=n.find(function(r){var n=""!==t?t+"\\."+e:""+e;return o.wf.Str.regexEscape(r)===n});return s?[s]:n}},{key:"create",value:function(t,e){var r=this,i=function(t){return t?t.hasOwnProperty("polymorphic")?t.polymorphic:Array.isArray(t)?t:[t]:[]},u=function t(u){(u=u.hasOwnProperty("type")&&"Array"===u.type?[u]:i(u)).forEach(function(i){if("object"!==(void 0===i?"undefined":n(i))&&l.push(new s.Validator.Default(e,i,r.$jsd)),i.hasOwnProperty("*"))return t(i["*"].elements||i["*"].polymorphic||i["*"]),delete i["*"],void(Object.keys(i)>0&&t(i.elements||i.polymorphic||i));if(i.hasOwnProperty("type")){var u=o.wf.Str.capitalize(i.type),c=0<=Object.keys(s.Validator).indexOf(u),h=(0,a.remapPolypath)(e);f=new s.Validator[c?u:"Default"](h,i,r.$jsd),l.push(f)}})},f=o._validators.get(this),l=[];t.hasOwnProperty("type")&&"Array"===t.type?u(t):u(i(t));var c=function t(e){var r=void 0,n=void 0;for(var i in t.$functs)if(t.$functs.hasOwnProperty(i)){if("boolean"==typeof(r=t.$functs[i].exec(e)))return r;n=r}return n||!0};return this.set((0,a.remapPolypath)(e),c),Object.defineProperty(c,"$functs",{get:function(){return l},enumerable:!1}),c}},{key:"exec",value:function(t,e){var r=o._validators.get(this);return r.hasOwnProperty(t)?r[t](e):"validator for '"+t+"' does not exist"}}]),t}()},function(e,r){e.exports=t},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ObserverBuilder=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(11);e.ObserverBuilder=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i._observers.set(this,{})}return n(t,[{key:"list",value:function(){var t=i._observers.get(this);return Object.keys(t)}},{key:"get",value:function(t){var e=i._observers.get(this);return(0,i._exists)(e[t])?e[t]:null}},{key:"create",value:function(t,e){i._observers.get(this)[t]={onNext:new o.BehaviorSubject(null).skip(1),onError:new o.BehaviorSubject(null).skip(1),onComplete:new o.BehaviorSubject(null).skip(1)}}},{key:"next",value:function(t,e){var r=this.get(t);r&&r.onNext.next(e)}},{key:"complete",value:function(t,e){var r=this.get(t);r&&r.onComplete.next(e)}},{key:"error",value:function(t,e){var r=this.get(t);r&&r.onError.next(e)}}]),t}()},function(t,e,r){var n;"undefined"!=typeof self&&self,n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);r.d(e,"Fun",function(){return n.a});var i=r(7);r.d(e,"Obj",function(){return i.a});var o=r(8);r.d(e,"Str",function(){return o.a});e.exists=(t=>null!=t)},function(t,e,r){"use strict";(function(t){r(0);class n{static getFunctionName(t){let e=t.toString().match(/function+\s{1,}([a-zA-Z_0-9\$]*)/);return null!==e?e[1]:null}static getConstructorName(t){"Function"===t.constructor.name&&(t=new t);let e=null;return null!==(e=this.getFunctionName(t.constructor))?e:null}static construct(t,e){return new(t.bind.apply(t,[null].concat(e)))}static get factory(){return n.construct.bind(null,Function)}static fromString(t){let e=t.replace(/\n/g,"").replace(/[\s]{2,}/g,"");if(null!==(e=e.match(/^function+[\s]{1,}[a-zA-Z0-9_]*\(([a-zA-Z0-9_\s,]*)\)+\s?\{+(.*)\}+$/)))return n.factory([].concat(e[1],e[2]));let r=t.match(new RegExp(`^Native::(${Object.keys(this.natives).join("|")})+$`));return null!==r?this.natives[r[1]]:null}static toString(t){if("function"!=typeof t)return t;let e=null;return null!=(e=t.toString()).match(/.*\[native code\].*/)?`Native::${this.getFunctionName(t)}`:e}static get natives(){return{Array:Array,ArrayBuffer:ArrayBuffer,Boolean:Boolean,Buffer:t,ArrayBuffer:ArrayBuffer,Date:Date,Number:Number,Object:Object,String:String,Function:Function}}}e.a=n}).call(e,r(2).Buffer)},function(t,e,r){"use strict";(function(t){var n=r(4),i=r(5),o=r(6);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return f(this,t,e,r)}function f(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:g(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):g(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function f(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(f(t,o)===f(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var c=!0,h=0;h<u;h++)if(f(t,o+h)!==f(e,h)){c=!1;break}if(c)return o}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function m(t,e,r,n){return F(Y(e,t.length-r),t,r,n)}function w(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return w(t,e,r,n)}function O(t,e,r,n){return F(q(e),t,r,n)}function S(t,e,r,n){return F(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function j(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,f=t[i],l=null,c=f>239?4:f>223?3:f>191?2:1;if(i+c<=r)switch(c){case 1:f<128&&(l=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&f)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&f)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=c}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=P));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return f(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return j(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),f=this.slice(n,i),l=t.slice(e,r),c=0;c<s;++c)if(f[c]!==l[c]){o=f[c],a=l[c];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return _(this,t,e,r);case"base64":return O(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function E(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=L(t[o]);return i}function B(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function M(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function C(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function D(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(t,e,r,n,o){return o||D(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,o){return o||D(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||T(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||T(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);T(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);T(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return I(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return I(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:Y(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(e,r(3))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.byteLength=function(t){return 3*t.length/4-f(t)},e.toByteArray=function(t){var e,r,n,a,s,u=t.length;a=f(t),s=new o(3*u/4-a),r=a>0?u-4:u;var l=0;for(e=0;e<r;e+=4)n=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[l++]=n>>16&255,s[l++]=n>>8&255,s[l++]=255&n;2===a?(n=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[l++]=255&n):1===a&&(n=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[l++]=n>>8&255,s[l++]=255&n);return s},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o="",a=[],s=0,u=r-i;s<u;s+=16383)a.push(l(t,s,s+16383>u?u:s+16383));1===i?(e=t[r-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="=");return a.push(o),a.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,f=u>>1,l=-7,c=r?i-1:0,h=r?-1:1,p=t[e+c];for(c+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+c],c+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+c],c+=h,l-=8);if(0===o)o=1-f;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=f}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,f=8*o-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=l?(s=0,a=l):a+c>=1?(s=(e*u-1)*Math.pow(2,i),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=y,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;t[r+p]=255&a,p+=y,a/=256,f-=8);t[r+p-y]|=128*d}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=r(1);const i=(t,e,r)=>{let n=[],i=t<e,o=r?i?e+1:e-1:e;for(let e=t;i?e<o:e>o;i?e++:e--)n.push(e);return n};e.a=class{static getTypeOf(t){return Object.prototype.toString.call(t).slice(8,-1)}static isOfType(t,e){return this.getTypeOf(t)===n.a.getFunctionName(e)||t instanceof e}static objectToQuery(t={}){let e=[],r=Object.keys(t);for(let n of i(0,r.length-1,!0))e[n]=[r[n],t[r[n]]];return e.map((t,e)=>t.join("=")).join("&")}static queryToObject(t){let e={};return decodeURIComponent(t).replace("?","").split("&").forEach((t,r)=>{let n;if(2===(n=t.split("=")).length)return e[n[0]]=n[1]}),e}}},function(t,e,r){"use strict";e.a=class{static capitalize(t){return null===t?"":("string"!=typeof t&&(t=t.toString()),t.split(/[\s]{1,}/).map(t=>`${t.charAt(0).toUpperCase()}${t.slice(1)}`).join(" "))}static stripNull(t){return void 0===t?"":t.replace(/\0/g,"")}static regexEscape(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}}])},t.exports=n()},function(t,e,r){t.exports=r(13)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);Object.defineProperty(e,"JSD",{enumerable:!0,get:function(){return n.JSD}}),"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;){var r=arguments[e];if(null!==r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);e+=1}return t})}])});